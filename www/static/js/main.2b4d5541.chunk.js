(this["webpackJsonpraraph84-website"]=this["webpackJsonpraraph84-website"]||[]).push([[0],{27:function(e,t,n){},29:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var s=n(4),a=n(5),c=n(7),i=n(6),r=n(1),o=n.n(r),u=n(14),l=n.n(u),d=n(10),m=n(2),j=(n(27),n(0)),h=0,b=function(e){h+=e?1:-1,document.getElementById("loading").style.display=h>0?"":"none"},p=function(e,t){return new Promise((function(n,s){b(!0);var a=new XMLHttpRequest;a.open("POST","https://api.raraph84.ml"+e),a.addEventListener("load",(function(){try{n(JSON.parse(a.response))}catch(e){n(a.response)}b(!1)})),a.send(t)}))},g=(o.a.Component,function(e){return new Promise((function(t,n){var s=new FileReader;s.readAsDataURL(e),s.addEventListener("load",(function(){return t(s.result)})),s.addEventListener("error",(function(e){return n(e)}))}))}),v=(n(29),function(){return new Promise((function(e,t){if(!localStorage.getItem("token"))return{code:401,message:"Invalid token"};p("/user",JSON.stringify({token:localStorage.getItem("token")})).then((function(n){200===n.code?e(n):(401===n.code&&localStorage.removeItem("token"),t(n))}))}))}),O=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={user:null,menu:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){e.setState({user:{username:t.username,avatar:"https://api.raraph84.ml/avatar?userId="+t.userId}})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.state.user?Object(j.jsxs)("div",{className:"menu",children:[Object(j.jsxs)("div",{className:"user",onClick:function(){return e.setState({menu:!e.state.menu})},children:[Object(j.jsx)("img",{src:this.state.user.avatar,alt:" "}),Object(j.jsx)("span",{children:this.state.user.username})]}),Object(j.jsxs)("div",{style:{display:this.state.menu?"block":"none"},children:[Object(j.jsx)(d.b,{to:"/account",onClick:function(){return e.setState({menu:!1})},children:"Mon compte"}),Object(j.jsx)(d.b,{to:"/logout",onClick:function(){return e.setState({menu:!1})},style:{color:"red"},children:"Se d\xe9connecter"})]})]}):Object(j.jsx)(d.b,{className:"loginButton",to:"/login",children:"Se connecter"});return Object(j.jsxs)("header",{children:[Object(j.jsxs)(d.b,{to:"/home",className:"logo",children:[Object(j.jsx)("img",{src:"./imgs/logo.png",alt:"Logo"}),Object(j.jsx)("span",{children:"Raraph84"})]}),t]})}}]),n}(o.a.Component),x=(o.a.Component,function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),document.title="Page introuvable | Raraph84",a}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"title",children:"Tu es perdu ?"}),Object(j.jsx)(d.b,{className:"button",to:"/home",children:"Revenir sur la page principale"})]})}}]),n}(o.a.Component)),f=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.animate&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1s";new Promise((function(s,a){e.style.animationDuration=n,e.classList.add("animate__animated","animate__"+t),e.addEventListener("animationend",(function(){e.classList.remove("animate__animated","animate__"+t),s()}),{once:!0})}))}(l.a.findDOMNode(this),"bounceIn","1s")}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"status",children:this.props.message})}}]),n}(o.a.Component),y=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),document.title="Connexion | Raraph84",a.state={status:""},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"title",children:"Connexion"}),this.state.status?Object(j.jsx)(f,{message:this.state.status,animate:!0}):"",Object(j.jsxs)("div",{children:["Nom d'utilisateur/Email : ",Object(j.jsx)("input",{type:"text",id:"username",onKeyPress:function(e){"Enter"===e.key&&document.getElementById("password").focus()}})]}),Object(j.jsxs)("div",{children:["Mot de passe : ",Object(j.jsx)("input",{type:"password",id:"password",onKeyPress:function(e){"Enter"===e.key&&document.getElementById("connect").click()}})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"button",id:"connect",onClick:function(){localStorage.getItem("token")?e.setState({status:"Vous \xeates d\xe9j\xe0 connect\xe9 !"}):(e.setState({status:""}),p("/login",JSON.stringify({username:document.getElementById("username").value,password:document.getElementById("password").value})).then((function(t){200===t.code?(localStorage.setItem("token",t.token),document.location.assign("/")):"Missing username"===t.message?e.setState({status:"Nom d'utilisateur/Email manquant(e) !"}):"Missing password"===t.message?e.setState({status:"Mot de passe manquant !"}):"Account not exist"===t.message?e.setState({status:"Ce compte n'existe pas !"}):"Incorrect password"===t.message?e.setState({status:"Mot de passe incorrect !"}):e.setState({status:"Une erreur inconnue est survenue !"})})))},children:"Se connecter"})}),Object(j.jsx)(d.b,{className:"link",to:"/register",children:"Je n'ai pas de compte"})]})}}]),n}(o.a.Component),S=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),document.title="Cr\xe9er un compte | Raraph84",a.state={status:""},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"title",children:"Cr\xe9er un compte"}),this.state.status?Object(j.jsx)(f,{message:this.state.status,animate:!0}):"",Object(j.jsxs)("div",{children:["Nom d'utilisateur : ",Object(j.jsx)("input",{type:"text",id:"username",onKeyPress:function(e){"Enter"===e.key&&document.getElementById("email").focus()}})]}),Object(j.jsxs)("div",{children:["Email : ",Object(j.jsx)("input",{type:"text",id:"email",onKeyPress:function(e){"Enter"===e.key&&document.getElementById("password").focus()}})]}),Object(j.jsxs)("div",{children:["Mot de passe : ",Object(j.jsx)("input",{type:"password",id:"password",onKeyPress:function(e){"Enter"===e.key&&document.getElementById("password2").focus()}})]}),Object(j.jsxs)("div",{children:["Retaper le mot de passe : ",Object(j.jsx)("input",{type:"password",id:"password2",onKeyPress:function(e){"Enter"===e.key&&document.getElementById("create").click()}})]}),Object(j.jsxs)("div",{children:["J'ai lu et accept\xe9 les ",Object(j.jsx)(d.b,{className:"link",to:"/cgu",children:"conditions g\xe9n\xe9rales d'utilisation"})," : ",Object(j.jsx)("input",{type:"checkbox",id:"cgu"})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"button",id:"create",onClick:function(){return e.setState({status:""}),void(localStorage.getItem("token")?e.setState({status:"Vous \xeates d\xe9j\xe0 connect\xe9 !"}):document.getElementById("cgu").checked?document.getElementById("password").value===document.getElementById("password2").value?(e.setState({status:""}),p("/createAccount",JSON.stringify({username:document.getElementById("username").value,email:document.getElementById("email").value,password:document.getElementById("password").value})).then((function(t){200===t.code?(localStorage.setItem("token",t.token),document.location.assign("/")):"Missing email"===t.message?e.setState({status:"Email manquante !"}):"Email too long"===t.message?e.setState({status:"L'adresse email est trop longue !"}):"Missing username"===t.message?e.setState({status:"Nom d'utilisateur manquant !"}):"Username too long"===t.message?e.setState({status:"Le nom d'utilisateur est trop long !"}):"Missing password"===t.message?e.setState({status:"Mot de passe manquant !"}):"Username already exist"===t.message?e.setState({status:"Ce nom d'utilisateur est d\xe9j\xe0 utilis\xe9 !"}):"Email already exist"===t.message?e.setState({status:"Cette adresse email est d\xe9j\xe0 utilis\xe9e !"}):e.setState({status:"Une erreur inconnue est survenue !"})}))):e.setState({status:"Les mots de passe ne correspondent pas !"}):e.setState({status:"Vous devez lire et accepter les conditions g\xe9n\xe9rales d'utilisation !"}))},children:"Cr\xe9er le compte"})}),Object(j.jsx)(d.b,{className:"link",to:"/login",children:Object(j.jsx)("span",{children:"J'ai d\xe9j\xe0 un compte"})})]})}}]),n}(o.a.Component),k=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),document.title="D\xe9connexion...",a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){p("/logout",JSON.stringify({token:localStorage.getItem("token")})).then((function(){localStorage.removeItem("token"),document.location.assign("/")}))}},{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"title",children:"D\xe9connexion..."})})}}]),n}(o.a.Component),I=n(19),N=n.n(I),E=n(22),C=(n(36),function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),document.title="Mon compte | Raraph84",a.state={status:"",avatar:""},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){document.getElementById("username").value=t.username,document.getElementById("email").value=t.email,e.setState({avatar:"https://api.raraph84.ml/avatar?userId="+t.userId})})).catch((function(t){401===t.code?document.location.assign("/login"):e.setState({status:"Une erreur est survenue !"})}))}},{key:"render",value:function(){var e=this,t=function(){var t;e.setState({status:""}),(t=document.getElementById("username").value,new Promise((function(e,n){if(!localStorage.getItem("token"))return{code:401,message:"Invalid token"};p("/changeUsername",JSON.stringify({token:localStorage.getItem("token"),newUsername:t})).then((function(t){200===t.code?e(t):(401===t.code&&localStorage.removeItem("token"),n(t))}))}))).then((function(){return document.location.reload()})).catch((function(t){401===t.code?document.location.assign("/login"):"Username has not changed"===t.message?e.setState({status:"Le nom d'utilisateur n'a pas chang\xe9 !"}):"This username is already used"===t.message?e.setState({status:"Ce nom d'utilisateur est d\xe9j\xe0 utilis\xe9 !"}):e.setState({status:"Une erreur est survenue !"})}))},n=function(){var t;e.setState({status:""}),(t=document.getElementById("email").value,new Promise((function(e,n){if(!localStorage.getItem("token"))return{code:401,message:"Invalid token"};p("/changeEmail",JSON.stringify({token:localStorage.getItem("token"),newEmail:t})).then((function(t){200===t.code?e(t):(401===t.code&&localStorage.removeItem("token"),n(t))}))}))).then((function(){return document.location.reload()})).catch((function(t){401===t.code?document.location.assign("/login"):"Email has not changed"===t.message?e.setState({status:"L'email n'a pas chang\xe9e !"}):"This email is already used"===t.message?e.setState({status:"Cette email est d\xe9j\xe0 utilis\xe9e !"}):e.setState({status:"Une erreur est survenue !"})}))},s=function(){var t;e.state.avatar.startsWith("https://")?e.setState({status:"L'avatar n'a pas chang\xe9 !"}):(e.setState({status:""}),(t=e.state.avatar,new Promise((function(e,n){if(!localStorage.getItem("token"))return{code:401,message:"Invalid token"};p("/changeAvatar",JSON.stringify({token:localStorage.getItem("token"),file:t})).then((function(t){200===t.code?e(t):(401===t.code&&localStorage.removeItem("token"),n(t))}))}))).then((function(){return document.location.reload()})).catch((function(t){401===t.code?document.location.assign("/login"):"Unsupported image type"===t.message?e.setState({status:"Ce format n'est pas pris en charge !"}):e.setState({status:"Une erreur est survenue !"})})))},a=function(){var t=Object(E.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,g(n.target.files[0]);case 3:return t.t1=t.sent,t.t2={avatar:t.t1},t.abrupt("return",t.t0.setState.call(t.t0,t.t2));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"title",children:"Mon compte"}),this.state.status?Object(j.jsx)(f,{message:this.state.status,animate:!0}):"",Object(j.jsxs)("div",{children:["Nom d'utilisateur : ",Object(j.jsx)("input",{type:"text",id:"username",onKeyPress:function(e){"Enter"===e.key&&t()}}),Object(j.jsx)("button",{className:"button",onClick:function(){return t()},children:"Mettre \xe0 jour"})]}),Object(j.jsxs)("div",{children:["Email : ",Object(j.jsx)("input",{type:"text",id:"email",onKeyPress:function(e){"Enter"===e.key&&n()}}),Object(j.jsx)("button",{className:"button",onClick:function(){return n()},children:"Mettre \xe0 jour"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"file",id:"avatarInput",accept:".png, .jpg, .jpeg, .gif",onChange:a}),Object(j.jsxs)("div",{className:"avatar",onClick:function(){return document.getElementById("avatarInput").click()},children:[Object(j.jsx)("img",{src:this.state.avatar,className:"avatar",alt:"Changer d'avatar"}),Object(j.jsx)("span",{children:"Changer d'avatar"})]}),Object(j.jsxs)("div",{className:"avatarButtons",children:[Object(j.jsx)("button",{className:"button",onClick:function(){return e.setState({avatar:""})},children:"Supprimer l'avatar"}),Object(j.jsx)("button",{className:"button",onClick:function(){return s()},children:"Mettre \xe0 jour"})]})]})]})}}]),n}(o.a.Component)),w=(n(37),function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),document.title="Accueil | Raraph84",a}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"title",children:"Accueil"}),Object(j.jsx)("div",{className:"subtitle",children:"Salut !"}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("div",{children:"Je suis d\xe9veloppeur :"}),Object(j.jsx)("li",{children:"JavaScript (Front : React, Back/Bot Discord : NodeJS)"}),Object(j.jsx)("li",{children:"Java (Plugins Minecraft)"}),Object(j.jsx)("li",{children:"Bash (Linux)"}),Object(j.jsx)("li",{children:"HTML/CSS"})]}),Object(j.jsx)("div",{className:"subtitle",children:"Mes projets"}),Object(j.jsxs)("div",{className:"box",children:[Object(j.jsx)("a",{className:"link title",href:"https://eclipsia.fr/",children:"Eclipsia"}),Object(j.jsxs)("div",{className:"description",children:["Eclipsia est un serveur Mini-Jeux",Object(j.jsx)("br",{}),"cr\xe9\xe9 par des amis. Je suis d\xe9veloppeur et administrateur"]})]})]})}}]),n}(o.a.Component)),M=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){document.getElementById("pageLoading").remove()}},{key:"render",value:function(){return Object(j.jsxs)(d.a,{children:[Object(j.jsx)("div",{id:"loading",className:"loading",style:{display:"none"},children:Object(j.jsx)("i",{className:"fas fa-spinner"})}),Object(j.jsx)(O,{}),Object(j.jsx)("div",{className:"content",children:Object(j.jsxs)(m.c,{children:[Object(j.jsx)(m.a,{exact:!0,path:"/",children:Object(j.jsx)(w,{})}),Object(j.jsx)(m.a,{exact:!0,path:"/home",children:Object(j.jsx)(w,{})}),Object(j.jsx)(m.a,{exact:!0,path:"/login",children:Object(j.jsx)(y,{})}),Object(j.jsx)(m.a,{exact:!0,path:"/register",children:Object(j.jsx)(S,{})}),Object(j.jsx)(m.a,{exact:!0,path:"/account",children:Object(j.jsx)(C,{})}),Object(j.jsx)(m.a,{exact:!0,path:"/logout",children:Object(j.jsx)(k,{})}),Object(j.jsx)(x,{})]})})]})}}]),n}(o.a.Component);l.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(M,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.2b4d5541.chunk.js.map